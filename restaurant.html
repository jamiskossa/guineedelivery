<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Restaurants</title>
</head>
<body>

<header>
    <div class="logo">
        <h1>Plateforme de Livraison</h1>
    </div>
    <nav>
        <ul>
            <li><a href="index.html">Accueil</a></li>
            <li><a href="livraison.html" class="btn">Livraison de Colis</a></li>
            <li><a href="produits.html" class="btn-service">Découvrir les produits</a></li>
            <li><a href="#">Contact</a></li>
        </ul>
    </nav>
</header>

<section>
    <h2>Liste des Restaurants</h2>
    <div class="restaurant-list">
        <div class="restaurant">
            <h3>Restaurant 1</h3>
            <p>Description du restaurant 1. Plat principal : Poulet rôti.</p>
            <button class="btn-order" onclick="openOrderForm('Restaurant 1', 'Poulet rôti')">Commander</button>
        </div>
        <div class="restaurant">
            <h3>Restaurant 1</h3>
            <p>Description du restaurant 1. Plat principal : Poulet braisé.</p>
            <button class="btn-order" onclick="openOrderForm('Restaurant 1', 'Poulet braisé')">Commander</button>
        </div>
        <div class="restaurant">
            <h3>Restaurant 2</h3>
            <p>Description du restaurant 2. Plat principal : Poisson grillé.</p>
            <button class="btn-order" onclick="openOrderForm('Restaurant 2', 'Poisson grillé')">Commander</button>
        </div>
        <div class="restaurant">
            <h3>Restaurant 3</h3>
            <p>Description du restaurant 3. Plat principal : Pâtes à la sauce tomate.</p>
            <button class="btn-order" onclick="openOrderForm('Restaurant 3', 'Pâtes à la sauce tomate')">Commander</button>
        </div>
    </div>
</section>

        <!-- Formulaire de commande -->
<div id="orderForm" class="order-form">
    <h2>Passer une commande</h2>
    <form id="form" action="javascript:void(0);" method="POST" onsubmit="submitOrder()">
        <label for="restaurant">Restaurant:</label>
        <input type="text" id="restaurant" name="restaurant" readonly>

        <label for="plat">Plat:</label>
        <input type="text" id="plat" name="plat" readonly>

        <label for="nom">Votre Nom:</label>
        <input type="text" id="nom" name="nom" required>

        <label for="adresse">Votre Adresse:</label>
        <input type="text" id="adresse" name="adresse" required>

        <label for="email">Votre E-mail:</label>
        <input type="email" id="email" name="email" required>

        <label for="telephone">Votre Téléphone:</label>
        <input type="text" id="telephone" name="telephone" required>

        <label for="payment-method">Méthode de Paiement:</label>
        <select id="payment-method" name="payment-method" onchange="togglePaymentFields()" required>
            <option value="" disabled selected>Sélectionner</option>
            <option value="card">Carte Bancaire</option>
            <option value="orange">Orange Money</option>
            <option value="mobile">Mobile Money</option>
        </select>

        <input type="submit" value="Commander" class="btn-submit">
        <button type="button" onclick="closeOrderForm()" class="btn-cancel">Annuler</button>
    </form>
</div>
<footer>
    <p>&copy; 2024 Plateforme de Livraison. Tous droits réservés.</p>
</footer>

<!-- Script pour ouvrir et fermer le formulaire -->
<script>
    function openOrderForm(restaurant, plat) {
        document.getElementById('restaurant').value = restaurant;
        document.getElementById('plat').value = plat;
        document.getElementById('orderForm').style.display = 'block';
    }

    function closeOrderForm() {
        document.getElementById('orderForm').style.display = 'none';
        document.getElementById('form').reset(); // Réinitialiser le formulaire
    }
</script>

<script>
    function submitOrder() {
        const restaurant = document.getElementById('restaurant').value;
        const plat = document.getElementById('plat').value;
        const nom = document.getElementById('nom').value;
        const adresse = document.getElementById('adresse').value;
        const email = document.getElementById('email').value;
        const telephone = document.getElementById('telephone').value;
        const paymentMethod = document.getElementById('payment-method').value;

        // Vérification de la méthode de paiement
        if (paymentMethod === 'card') {
            const cardName = document.getElementById('card-name').value;
            const cardNumber = document.getElementById('card-number').value;
            const expiryDate = document.getElementById('expiry-date').value;
            const cvv = document.getElementById('cvv').value;

            // Vérification des champs de la carte bancaire
            if (!cardName || !cardNumber || !expiryDate || !cvv) {
                alert('Veuillez remplir tous les champs de la carte bancaire.');
                return;
            }

            // Stocker les informations de la carte dans localStorage
            localStorage.setItem('cardName', cardName);
            localStorage.setItem('cardNumber', cardNumber);
            localStorage.setItem('expiryDate', expiryDate);
            localStorage.setItem('cvv', cvv);
        }

        // Stocker les autres informations de commande
        localStorage.setItem('restaurant', restaurant);
        localStorage.setItem('meal', plat);
        localStorage.setItem('name', nom);
        localStorage.setItem('address', adresse);
        localStorage.setItem('email', email);
        localStorage.setItem('phone', telephone);

        alert('Commande soumise avec succès !');
        // Rediriger vers la page de confirmation après la soumission
        window.location.href = 'confirmation.html';
    }

    function togglePaymentFields() {
        const paymentMethod = document.getElementById('payment-method').value;
        const cardInfo = document.getElementById('card-info');

        if (paymentMethod === 'card') {
            cardInfo.style.display = 'block';
        } else {
            cardInfo.style.display = 'none';
        }
    }

    function closeOrderForm() {
        document.getElementById('orderForm').style.display = 'none';
    }
</script>


</body>
</html>
